/*
    - Simple jQuery mega menu.
    - 2, 3 and 4 columns.
    - Fully responsive.

    - Hover delay included.

    Copyright (c) 2013-2014, Justin He
    Licensed under the MIT License.
*/
!function(){jQuery("#header-wrapper ul.dropdown").hover(function(){$(this).parent().find("> a").addClass("expanded-menu")},function(){$(this).parent().find("> a").removeClass("expanded-menu")}),jQuery.fn.megamenu=function(a){function b(){c.find(".megamenu").each(function(){var b,c=jQuery(this),e=d.width(),f=c.offset().left,g=c.width(),h=c.find("> .dropdown > li.has-dropdown").length,i=$("#top .top-bar").width(),j=295,k=1;c.find("> .dropdown > li.has-dropdown > .dropdown").each(function(){var a=jQuery(this).find("> li").length;a>k&&(k=a)}),c.find("> .dropdown > li.has-dropdown > .dropdown").each(function(){var a=jQuery(this),b=a.find("> li").length;if(k>b)for(var c=1;k-b>=c;c++)a.append('<li class="empty-megamenu"></li>')}),j=i/h;var b=h*j>a?a:i,l=a>.9*e?.05*e:(e-a)/2,m=b/2-g/2;m=b/2>f+g/2-l?a-(f+g):m;var n=e-f-g-l;(e>1300||m>n)&&(m=n),c.find("> .dropdown > li.has-dropdown").css("width",j+"px"),c.find("> .dropdown > li.has-dropdown > .dropdown").css({width:j+"px","min-width":j+"px"}),c.find("> .dropdown").css({width:b+"px",right:-m+"px"})}),c.find("li:not(.megamenu).has-dropdown > .dropdown").each(function(){var a=jQuery(this),b=jQuery(window).width(),c=a.offset().left;a.width()+c>b&&a.css({left:"-100%","max-width":"100%"})})}var c=jQuery(this),d=jQuery(window);$(window).resize(b),b()},function(){jQuery("#top .top-bar:not(.expanded) .top-bar-section li.has-dropdown").each(function(){var a,b,c=jQuery(this);c.on("mouseenter tap",function(d){"tap"==d.type&&d.stopPropagation(),clearTimeout(a),clearTimeout(b),a=setTimeout(function(){c.addClass("hippo-menu-hovered"),c.hasClass("hippo-menu-hovered")&&c.children("ul").stop().css("visibility","visible").animate({opacity:1},200)},300)}),c.on("mouseleave",function(){clearTimeout(a),clearTimeout(b),b=setTimeout(function(){c.removeClass("hippo-menu-hovered"),c.hasClass("hippo-menu-hovered")||c.children("ul").css({opacity:0,visibility:"hidden"})},300)})})}()}(jQuery),jQuery(".top-bar-section").megamenu(1200);